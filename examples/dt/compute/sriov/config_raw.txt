# NOVA.CONF
# How are the VFs generated with RHOS18 on EDPM Compute Nodes
https://docs.openstack.org/neutron/latest/admin/config-sriov.html#create-virtual-functions-compute
 
###############
# Controllers #
###############
# For Nova
/etc/nova.conf
[filter_scheduler]
enabled_filters = AvailabilityZoneFilter, ComputeFilter, ComputeCapabilitiesFilter, ImagePropertiesFilter, ServerGroupAntiAffinityFilter, ServerGroupAffinityFilter, PciPassthroughFilter
available_filters = nova.scheduler.filters.all_filters
 
# For Neutron
/etc/neutron/plugins/ml2/ml2_conf.ini
[ml2_type_vlan]
network_vlan_ranges=datacentre:1:1000,physnet1:2000:2005,physnet2:2006:2010
 
###############
# On Computes #
###############
# For Nova
# /etc/nova.conf
[pci]
passthrough_whitelist={"devname":"enp8s0f3","physical_network":"physnet1","trusted":"true"}
 
# For Neutron
# /etc/neutron/plugins/ml2/sriov_agent.ini
[sriov_nic]
physical_device_mappings=physnet1:enp8s0f3
